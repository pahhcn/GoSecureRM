# GoSecureRM 服务端管理程序

## 概述

GoSecureRM 服务端是一个功能丰富的远程管理控制台，基于 Go 语言和 Fyne GUI 框架开发。该程序为系统管理员提供了直观的图形化界面，用于管理和控制多个远程客户端设备，实现高效的集中化运维管理。

## 核心特性

### 1. 图形化管理界面
- **现代化设计** - 基于 Fyne 框架的美观用户界面
- **主题切换** - 支持明暗两种主题模式
- **多窗口支持** - 可同时打开多个功能窗口进行操作
- **实时信息展示** - 动态显示客户端连接状态和执行结果

### 2. 多客户端管理
- **并发连接** - 支持同时管理多个客户端设备
- **批量操作** - 可向所有连接的客户端批量发送指令
- **连接监控** - 实时监控客户端连接状态和网络质量
- **自动重连** - 客户端断线后自动处理重连逻辑

### 3. 远程控制功能
- **命令执行** - 向远程客户端发送并执行系统命令
- **文件传输** - 双向文件传输，支持大文件和批量操作
- **屏幕监控** - 获取客户端实时截图，远程桌面监控
- **系统信息** - 收集客户端硬件配置、网络状态等信息

### 4. 安全与加密
- **TLS 通信** - 所有数据传输采用 TLS 1.2+ 加密
- **证书验证** - 支持自签名证书和 CA 证书验证
- **访问控制** - 基于证书的客户端身份验证
- **日志记录** - 详细的操作日志和安全审计

## 项目结构

```
server/
├── main.go         # 程序启动入口，初始化应用
├── ui.go          # 用户界面设计和交互逻辑
├── ser.go         # 服务端核心网络通信逻辑
├── cert.pem        # TLS 服务端公钥证书
├── key.pem         # TLS 服务端私钥文件
├── openssl.cnf     # OpenSSL 证书生成配置
├── go.mod          # Go 模块依赖声明
├── go.sum          # 依赖包版本校验文件
├── ico.ico         # 应用程序图标
├── rsrc.syso       # Windows 平台资源文件
└── README.md       # 服务端说明文档
```

## 安装配置

### 系统要求

- **操作系统**: Windows 10+, Linux (Ubuntu 18.04+), macOS 10.14+
- **Go 版本**: Go 1.19 或更高版本
- **内存要求**: 最低 512MB，推荐 1GB 以上
- **网络端口**: 默认使用 50050 端口，确保防火墙允许

### 依赖安装

1. 确保已安装 Go 开发环境
2. 安装项目依赖包：

```bash
cd server
go mod tidy
```

主要依赖包：
- `fyne.io/fyne/v2` - GUI 框架
- `crypto/tls` - TLS 加密通信
- `golang.org/x/text` - 文本编码处理

### 生成 TLS 证书

服务端需要 TLS 证书来确保通信安全。使用提供的配置文件生成自签名证书：

```bash
# 在 server 目录下执行
openssl req -new -x509 -days 365 -keyout key.pem -out cert.pem -config openssl.cnf
```

证书生成时的关键参数：
- **有效期**: 365 天（可根据需要调整）
- **密钥长度**: 2048 位 RSA
- **加密算法**: SHA-256

### 编译服务端

1. **标准编译**（保留控制台）：
```bash
go build -o GoSecureRM-Server.exe
```

2. **Windows 无窗口编译**：
```bash
go build -ldflags="-H windowsgui" -o GoSecureRM-Server.exe
```

## 使用指南

### 启动服务端

1. 确保证书文件 `cert.pem` 和 `key.pem` 存在
2. 运行服务端程序：

```bash
./GoSecureRM-Server.exe
```

3. 程序启动后会显示主界面，同时开始监听客户端连接

### 主界面功能

#### 1. 命令控制区
- **命令输入框** - 输入要发送给客户端的命令
- **发送按钮** - 将命令广播给所有连接的客户端
- **结果显示** - 实时显示命令执行结果和客户端反馈

#### 2. 菜单栏功能

**设置菜单**
- 清除显示 - 清空结果显示区域的内容

**首页菜单**
- 返回首页 - 切换到主控制界面

**主题菜单**
- 切换主题 - 在明暗主题之间切换

**工具菜单**
- 文件浏览 - 查看客户端文件系统
- 传输文件 - 上传文件到客户端或从客户端下载
- 获取信息 - 收集客户端系统信息
- 网络状态 - 查看客户端网络配置
- 一键关机 - 远程关闭客户端设备

**隐私窃取菜单**（用于安全测试）
- 一键获取浏览器数据 - 自动化浏览器数据提取流程
- 上传工具 - 向客户端上传数据提取工具
- 执行工具 - 远程执行数据提取程序
- 回传结果 - 获取提取的数据文件

**帮助菜单**
- 关于 - 显示程序版本和作者信息
- 帮助 - 显示使用说明和操作指南
- 退出 - 安全关闭服务端程序

### 高级功能

#### 1. 文件传输管理

**上传文件到客户端**：
1. 点击菜单 "工具" -> "传输文件"
2. 选择要上传的本地文件
3. 文件将自动传输到所有连接的客户端

**从客户端下载文件**：
1. 使用 "隐私窃取" -> "回传结果文件" 功能
2. 客户端会自动上传指定文件到服务端
3. 文件保存在服务端当前目录

#### 2. 批量客户端管理

- **状态监控** - 实时显示所有客户端的连接状态
- **批量命令** - 同时向多个客户端发送相同指令
- **分组管理** - 根据IP地址或功能对客户端进行分组

#### 3. 安全审计功能

- **连接日志** - 记录所有客户端的连接和断开时间
- **操作日志** - 记录管理员执行的所有操作命令
- **传输日志** - 记录文件传输的详细信息

## 网络配置

### 端口设置

默认监听端口为 `50050`，如需修改请编辑 `ser.go` 文件：

```go
const serverAddress = "0.0.0.0:新端口号"
```

### 防火墙配置

确保防火墙允许服务端端口的入站连接：

**Windows 防火墙**：
```cmd
netsh advfirewall firewall add rule name="GoSecureRM-Server" dir=in action=allow protocol=TCP localport=50050
```

**Linux iptables**：
```bash
sudo iptables -A INPUT -p tcp --dport 50050 -j ACCEPT
```

### 网络安全建议

1. **内网部署** - 建议在可信的内部网络中部署
2. **VPN 访问** - 如需互联网访问，建议通过 VPN 连接
3. **定期更新** - 定期更新 TLS 证书，避免证书过期
4. **访问控制** - 使用防火墙限制访问来源 IP

## 故障排除

### 常见问题

#### 1. 服务端启动失败

**错误信息**: "加载证书失败"
**解决方法**:
- 检查 `cert.pem` 和 `key.pem` 文件是否存在
- 验证证书文件格式是否正确
- 重新生成证书文件

#### 2. 客户端无法连接

**可能原因及解决方法**:
- **端口被占用**: 使用 `netstat -an | findstr 50050` 检查端口状态
- **防火墙阻止**: 配置防火墙允许相应端口
- **证书不匹配**: 确保客户端使用正确的证书

#### 3. 界面显示异常

**解决方法**:
- 尝试切换主题（明暗模式）
- 重启服务端程序
- 检查系统显示缩放设置

#### 4. 文件传输失败

**解决方法**:
- 检查文件权限和磁盘空间
- 验证网络连接稳定性
- 检查传输文件的大小限制

### 性能优化

#### 1. 内存使用优化

- **监控内存使用** - 定期检查程序内存占用
- **限制并发连接** - 根据服务器性能设置合理的客户端连接数
- **清理日志文件** - 定期清理过期的日志文件

#### 2. 网络性能优化

- **调整缓冲区大小** - 根据网络带宽调整 TCP 缓冲区
- **启用压缩传输** - 对大文件传输启用压缩
- **优化超时设置** - 根据网络环境调整连接超时时间

## 开发与扩展

### 二次开发指南

1. **代码结构理解** - 熟悉 main.go、ui.go、ser.go 的功能分工
2. **Fyne 框架学习** - 掌握 Fyne GUI 框架的基本用法
3. **网络编程基础** - 了解 TLS 加密通信的实现原理
4. **Go 并发编程** - 理解 goroutine 在多客户端管理中的应用

### 功能扩展建议

- **数据库集成** - 添加数据库支持，存储客户端信息和操作记录
- **Web 界面** - 开发 Web 版管理界面，支持远程 Web 访问
- **插件系统** - 设计插件架构，支持功能模块的动态加载
- **多语言支持** - 添加国际化支持，提供多语言界面

## 安全警告

⚠️ **重要提醒**：本工具功能强大，使用时请注意以下安全事项：

1. **合法使用** - 仅在授权的设备和网络环境中使用
2. **数据保护** - 妥善保管 TLS 私钥和敏感数据
3. **访问控制** - 限制服务端的访问权限，避免未授权使用
4. **监控审计** - 启用详细的操作日志，便于安全审计
5. **定期更新** - 及时更新程序版本，修复安全漏洞

## 许可证与免责声明

本项目基于 MIT 许可证开源发布。使用本软件时请遵守当地法律法规，开发者不承担因软件使用不当造成的任何法律责任。

---

**技术支持**: 如遇到技术问题，请查阅项目文档或参考源代码注释。
